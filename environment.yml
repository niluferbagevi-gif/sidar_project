name: sidar-ai
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults
dependencies:
  - python=3.11
  - pip
  - git
  - setuptools
  - wheel
  - packaging
  # PyTorch CUDA kurulumu — pytorch-cuda hem CUDA toolkit'i hem de torch'u kapsar.
  # cudatoolkit paketini AYRICA listelemeyin: pytorch-cuda=11.8 ile çakışır.
  # GPU YOK ise bu iki satırı silin ve pip bölümüne torch>=2.0.0 ekleyin.
  - pytorch-cuda=11.8
  - pytorch>=2.0.0
  - torchvision
  - pip:
      # ── Temel ─────────────────────────────────
      - python-dotenv>=1.0.0
      # requests kaldırıldı — tüm HTTP istekleri httpx (aşağıda) ile yapılıyor
      - pyyaml>=6.0.1  # Dockerfile parse işlemleri ve genel konfigürasyon için

      # ── Asenkron Geçiş ve Veri Doğrulama ──────
      - httpx>=0.25.0  # Asenkron LLMClient, WebSearchManager, PackageInfoManager, RAG
      - pydantic>=2.4.0  # ToolCall şeması (sidar_agent.py) ve test doğrulamaları için

      # ── Sistem İzleme ─────────────────────────
      - psutil>=5.9.5
      # GPU sıcaklık, kullanım yüzdesi ve sürücü sürümü için (opsiyonel ama önerilir)
      # NOT: CUDA sistemi yoksa kurulum başarısız olmaz; pynvml gracefully devre dışı kalır
      - nvidia-ml-py>=12.535.77

      # ── Docker (Güvenli Kod Çalıştırma / REPL Sandbox) ───
      - docker>=6.0.0  # managers/code_manager.py içinde Docker izole REPL için

      # ── AI Sağlayıcıları ──────────────────────
      # NOT: ollama paketi kaldırıldı — Ollama API'sine httpx ile HTTP isteği atılıyor
      - google-generativeai>=0.7.0

      # ── GitHub Entegrasyonu ───────────────────
      - PyGithub>=2.1.0

      # ── Web Arama ─────────────────────────────
      - duckduckgo-search>=6.1.0

      # ── RAG (Vektör & BM25) ───────────────────
      - rank-bm25>=0.2.2
      # ChromaDB ve bağımlılıkları (Hafif vektör DB)
      - chromadb>=0.4.0
      # Vektör embed işlemleri için (ChromaDB varsayılan: all-MiniLM-L6-v2)
      - sentence-transformers>=2.2.0

      # ── Web Arayüzü ───────────────────────────
      - fastapi>=0.104.0
      - uvicorn[standard]>=0.24.0

      # ── Geliştirme & Test ─────────────────────
      - pytest>=7.4.0
      - pytest-asyncio>=0.21.0  # @pytest.mark.asyncio dekoratörü için zorunlu
      - pytest-cov>=4.1.0
      - black>=23.0.0
      - flake8>=6.0.0
      - mypy>=1.5.0
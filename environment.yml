name: sidar-ai
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.11
  - pip
  - git
  - setuptools
  - wheel
  - packaging
  # ─── PyTorch ───────────────────────────────────────────────────────────────
  # WSL2 / Ubuntu / Conda ortamı için NOT:
  #   Conda'nın pytorch-cuda paketi, WSL2'nin Windows sürücüsünden gelen
  #   libcuda.so.1 stub'ı ile ÇAKIŞIR → GPU görünmez hale gelir.
  #   Bu yüzden PyTorch'u CONDA yerine PIP (CUDA wheel) üzerinden kuruyoruz.
  #
  #   RTX 3070 Ti Laptop (Compute 8.6 / Ampere) — CUDA 12.1 tam desteklidir.
  #   Pip bölümünde torch wheel ile kurulumu yapılmaktadır (aşağıya bakın).
  #
  #   GPU YOK ise pip bölümündeki torch satırını şu şekilde değiştirin:
  #     - torch>=2.4.0
  #     - torchvision>=0.19.0
  #   (index-url satırını silin)
  - pip:
      # ── Temel ─────────────────────────────────────────────────────────────
      - python-dotenv>=1.0.0
      - pyyaml>=6.0.1
      - requests>=2.31.0

      # ── Asenkron HTTP & Veri Doğrulama ────────────────────────────────────
      - httpx>=0.25.0
      - pydantic>=2.4.0

      # ── PyTorch — WSL2 CUDA 12.1 (RTX 3070 Ti / Ampere) ──────────────────
      # CUDA 12.1 wheel — WSL2 ortamında Windows sürücüsü ile uyumlu
      # Daha güncel sürücünüz varsa cu124 kullanabilirsiniz:
      #   --index-url https://download.pytorch.org/whl/cu124
      - --index-url https://download.pytorch.org/whl/cu121
      - torch>=2.4.0
      - torchvision>=0.19.0

      # ── Sistem İzleme ─────────────────────────────────────────────────────
      - psutil>=5.9.5
      # GPU sıcaklık, kullanım yüzdesi ve sürücü sürümü için (opsiyonel).
      # WSL2'de NVML erişimi kısıtlı olabilir (Windows sürücüsü bağımlı);
      # kod gracefully devre dışı kalır (hata vermez).
      - nvidia-ml-py>=12.535.77

      # ── Docker (Güvenli Kod Çalıştırma / REPL Sandbox) ────────────────────
      - docker>=6.0.0

      # ── AI Sağlayıcıları ──────────────────────────────────────────────────
      - google-generativeai>=0.7.0

      # ── GitHub Entegrasyonu ───────────────────────────────────────────────
      - PyGithub>=2.1.0

      # ── Web Arama ─────────────────────────────────────────────────────────
      - duckduckgo-search>=6.1.0

      # ── RAG (Vektör & BM25) ───────────────────────────────────────────────
      - rank-bm25>=0.2.2
      - chromadb>=0.4.0
      # sentence-transformers: USE_GPU=true ise CUDA üzerinde embedding yapar
      - sentence-transformers>=2.2.0

      # ── Web Arayüzü ───────────────────────────────────────────────────────
      - fastapi>=0.104.0
      - uvicorn[standard]>=0.24.0

      # ── Geliştirme & Test ─────────────────────────────────────────────────
      - pytest>=7.4.0
      - pytest-asyncio>=0.21.0
      - pytest-cov>=4.1.0
      - black>=23.0.0
      - flake8>=6.0.0
      - mypy>=1.5.0